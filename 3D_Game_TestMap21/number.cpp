// =====================================================================================================================================================================
//
// ナンバーの処理 [number.cpp]
// Author : Sato Yoshiki
//
// =====================================================================================================================================================================
#include "number.h"			// インクルードファイル
#include "renderer.h"

// =====================================================================================================================================================================
// 静的メンバ変数の初期化
// =====================================================================================================================================================================
LPDIRECT3DTEXTURE9	CNumber::m_pTexture = NULL;			// 先頭は型名

// =====================================================================================================================================================================
// マクロ定義
// =====================================================================================================================================================================
#define TEXTURE_FILE		"data/TEXTURE/num00.png"	// 読み込むテクスチャファイル名

// =====================================================================================================================================================================
//
// コンストラクタ
//
// =====================================================================================================================================================================
CNumber::CNumber():CScene2D(PRIORITY_UI)
{
}

// =====================================================================================================================================================================
//
// デストラクタ
//
// =====================================================================================================================================================================
CNumber::~CNumber()
{
}

// =====================================================================================================================================================================
//
// 初期化処理
//
// =====================================================================================================================================================================
void CNumber::Init()
{
	// 初期化
	CScene2D::Init();
}

// =====================================================================================================================================================================
//
// 終了処理
//
// =====================================================================================================================================================================
void CNumber::Uninit(void)
{
	CScene2D::Uninit();
}

// =====================================================================================================================================================================
//
// 更新処理
//
// =====================================================================================================================================================================
void CNumber::Update(void)
{
	// 変数
	D3DXVECTOR3		pos;

	// 位置の取得
	pos = CScene2D::GetPos();

	//位置の設定
	CScene2D::SetPos(pos);

	// 更新
	CScene2D::Update();
}

// =====================================================================================================================================================================
//
// 描画処理
//
// =====================================================================================================================================================================
void CNumber::Draw(void)
{	
	CScene2D::Draw();
}

// =====================================================================================================================================================================
//
// ナンバーの生成
//
// =====================================================================================================================================================================
CNumber * CNumber::Create()
{
	// 変数
	CNumber *pNumber;

	// メモリの確保
	pNumber = new CNumber;

	// 初期化
	pNumber->Init();

	// テクスチャの割り当て
	pNumber->BindTexture(m_pTexture);

	return pNumber;
}

// =====================================================================================================================================================================
//
// ロード
//
// =====================================================================================================================================================================
HRESULT CNumber::Load(void)
{
	// デバイスの取得
	LPDIRECT3DDEVICE9 pDevice = *CManager::GetRenderer()->GetDevice();

	// テクスチャ読み込み
	D3DXCreateTextureFromFile(pDevice, TEXTURE_FILE, &m_pTexture);

	return S_OK;
}

// =====================================================================================================================================================================
//
// アンロード
//
// =====================================================================================================================================================================
void CNumber::Unload(void)
{
	// テクスチャの開放
	if (m_pTexture != NULL)
	{
		m_pTexture->Release();
		m_pTexture = NULL;
	}
}