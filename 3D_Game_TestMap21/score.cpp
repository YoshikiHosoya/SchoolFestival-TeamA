// =====================================================================================================================================================================
//
// スコアの処理 [score.cpp]
// Author : Sato Yoshiki
//
// =====================================================================================================================================================================
#include "score.h"			// インクルードファイル
#include "game.h"
#include "player.h"
#include "multinumber.h"

// =====================================================================================================================================================================
// 静的メンバ変数の初期化
// =====================================================================================================================================================================
D3DXVECTOR2			CScore::m_UVsize			= D3DXVECTOR2(0.1f, 1.0f);		// 先頭は型名
int					CScore::m_nScore			= 0;							// 先頭は型名
CMultiNumber		*CScore::m_pMultiNumber		= NULL;

// =====================================================================================================================================================================
// マクロ定義
// =====================================================================================================================================================================
#define SCORE_POSX			(1050.0f)		// スコアの座標
#define SCORE_POSY			(30.0f)			// スコアの座標
#define SCORE_SIZEX			(15.0f)			// スコアの幅
#define SCORE_SIZEY			(20.0f)			// スコアの高さ
#define SCORE_SPACE			(26.0f)			// スコアの間隔

#define SCORE_LIFEUP		(10000)			// 体力が増えるスコアの値

// =====================================================================================================================================================================
//
// コンストラクタ
//
// =====================================================================================================================================================================
CScore::CScore()
{
}

// =====================================================================================================================================================================
//
// デストラクタ
//
// =====================================================================================================================================================================
CScore::~CScore()
{
}

// =====================================================================================================================================================================
//
// 初期化処理
//
// =====================================================================================================================================================================
void CScore::Init(void)
{
	// スコア初期化
	m_nScore = 0;
}

// =====================================================================================================================================================================
//
// 終了処理
//
// =====================================================================================================================================================================
void CScore::Uninit(void)
{
	if (m_pMultiNumber != NULL)
	{
		m_pMultiNumber->Uninit();

		delete m_pMultiNumber;
		m_pMultiNumber = NULL;
	}
}

// =====================================================================================================================================================================
//
// 更新処理
//
// =====================================================================================================================================================================
void CScore::Update(void)
{

}

// =====================================================================================================================================================================
//
// 描画処理
//
// =====================================================================================================================================================================
void CScore::Draw(void)
{	

}

// =====================================================================================================================================================================
//
// スコアの生成
//
// =====================================================================================================================================================================
CScore * CScore::Create()
{
	// 変数
	CScore *pScore;

	// メモリの確保
	pScore = new CScore();

	// 初期化
	pScore->Init();

	D3DXVECTOR3 pos		= D3DXVECTOR3(SCORE_POSX, SCORE_POSY, 0.0f);
	D3DXVECTOR3 size	= D3DXVECTOR3(SCORE_SIZEX, SCORE_SIZEY, 0.0f);

	// マルチナンバーの生成
	m_pMultiNumber = CMultiNumber::Create(pos, size, 0, SCORE_SPACE);

	return pScore;
}

// =====================================================================================================================================================================
//
// スコアの加算
//
// =====================================================================================================================================================================
void CScore::AddScore(int nScore)
{
	// 代入
	int nScoreOld = m_nScore;

	m_nScore	+=	nScore;

	m_pMultiNumber->SetScore(m_nScore);
}

// =====================================================================================================================================================================
//
// スコアの取得
//
// =====================================================================================================================================================================
int CScore::GetScore()
{
	return m_nScore;
}
