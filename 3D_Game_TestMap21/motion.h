// =====================================================================================================================================================================
//
// モーションの処理 [motion.h]
// Author : Sato Yoshiki
//
// =====================================================================================================================================================================
#ifndef _MOTION_H_
#define _MOTION_H_

#include "main.h"
#include "player.h"

// =====================================================================================================================================================================
// 前方宣言	( ポインタだけなら使える )
// =====================================================================================================================================================================
class	CKeyboard;				// キーボードクラス

// =====================================================================================================================================================================
// マクロ定義
// =====================================================================================================================================================================
#define MAX_KEY_SET					(5)				// キーセットの最大数

// =====================================================================================================================================================================
// キー要素
// =====================================================================================================================================================================
typedef struct
{
	D3DXVECTOR3			pos;						// 位置情報
	D3DXVECTOR3			rot;						// 現在の回転情報
}KEY;

// =====================================================================================================================================================================
// キー情報
// =====================================================================================================================================================================
typedef struct
{
	int					nFrame;						// フレーム数
	KEY					aKey[PLAYER_PARTS];			// パーツ数
}KEY_SET;

// =====================================================================================================================================================================
// モーション情報
// =====================================================================================================================================================================
typedef struct
{
	int					nLoop;						// ループするかどうか	
	int					nNumKey;					// キーの数
	KEY_SET				aKeySet[MAX_KEY_SET];		// キーセット数
}MOTION_INFO;

// =====================================================================================================================================================================
// モーションクラス
// =====================================================================================================================================================================
class CMotion
{
public:
	/* 静的メンバ関数 */
	static	void				MotionLoad();															// モーションの読み込み
	static	D3DXVECTOR3			GetMotionRotDest(int nMotion, int nKeySet, int nKey) 
									{ return m_aMotion[nMotion].aKeySet[nKeySet].aKey[nKey].rot; };		// モーションの目的の回転情報を取得
	static	int					GetMotionFrame(int nMotion, int nKeySet) 
									{ return m_aMotion[nMotion].aKeySet[nKeySet].nFrame; };				// モーションのフレーム数を取得
	static	int					GetMotionLoop(int nMotion)	
									{ return m_aMotion[nMotion].nLoop; };								// モーションのループ情報を取得
	static	int					GetMotionNumKey(int nMotion) 
									{ return m_aMotion[nMotion].nNumKey; };								// モーションのキー数を取得

private:
	/* 静的メンバ変数 */
	static	MOTION_INFO			m_aMotion[PLAYER_MOTION];		// モーション情報
};
#endif
